<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rychl√° ƒåteƒçka</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0a0a;
            color: #e0e0e0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .word-display,
        .word-container,
        .word-layout,
        .word-before,
        .word-highlight,
        .word-after {
            font-family: 'Inter', -apple-system, sans-serif;
            font-weight: 600;
        }

        /* Text Input Section */
        .text-input-section {
            background: #1a1a1a;
            padding: 30px;
            border-bottom: 1px solid #333;
            position: relative;
        }

        .text-input-section.hidden {
            display: none;
        }

        .input-lang-selector {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 5px;
            background: #0a0a0a;
            padding: 5px;
            border-radius: 20px;
            border: 1px solid #333;
        }

        .input-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .input-container h2 {
            color: #e0e0e0;
            margin-bottom: 20px;
            font-size: 24px;
        }

        textarea {
            width: 100%;
            min-height: 280px;
            background: #111;
            color: #e0e0e0;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 20px;
            font-size: 16px;
            line-height: 1.7;
            resize: vertical;
            margin-bottom: 20px;
            font-family: 'Inter', sans-serif;
        }

        textarea:focus {
            outline: none;
            border-color: #666;
        }

        button {
            background: #444;
            color: #fff;
            border: none;
            padding: 14px 32px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        button:hover {
            background: #555;
            transform: scale(1.02);
        }

        button:active {
            transform: scale(0.98);
        }

        button.primary {
            background: #c43850;
        }

        button.primary:hover {
            background: #d64a62;
        }

        button.secondary {
            background: #2a2a2a;
        }

        button.secondary:hover {
            background: #3a3a3a;
        }

        /* Reader View */
        .reader-container {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .reader-view {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            min-height: 400px;
            position: relative;
        }

        .word-display {
            font-size: clamp(2rem, 8vw, 4rem);
            font-weight: 600;
            line-height: 1.2;
            width: 100%;
            max-width: 100%;
            overflow: hidden;
        }

        .word-container {
            position: relative;
            display: block;
            width: 100%;
        }

        .word-layout {
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            height: 1.3em;
            width: 100%;
        }

        .word-before {
            color: #b0b0b0;
            position: absolute;
            right: calc(50% + 0.25em);
            white-space: nowrap;
            text-align: right;
        }

        .word-highlight {
            color: #ff4458;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: auto;
            min-width: 0.5em;
            text-align: center;
            white-space: nowrap;
        }
        
        .prepare-text {
            color: #888;
            font-size: 1.5rem;
            text-align: center;
        }

        .word-after {
            color: #b0b0b0;
            position: absolute;
            left: calc(50% + 0.25em);
            white-space: nowrap;
            text-align: left;
        }

        /* Progress Bar - subtle */
        .progress-container {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            opacity: 0.4;
        }

        .progress-bar {
            height: 2px;
            background: #333;
            border-radius: 1px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #666;
            width: 0%;
            transition: width 0.15s ease-out;
        }

        .progress-text {
            text-align: center;
            font-size: 10px;
            color: #555;
            margin-top: 4px;
        }

        /* Success Screen */
        .success-screen {
            text-align: center;
            padding: 40px 20px;
        }

        .success-screen h2 {
            color: #4ade80;
            font-size: 2rem;
            margin-bottom: 30px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            max-width: 400px;
            margin: 0 auto 30px;
        }
        
        @media (max-width: 400px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }

        .stat-item {
            background: #1a1a1a;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #333;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: #ff4458;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 13px;
            color: #888;
        }

        /* Controls */
        .controls {
            background: #1a1a1a;
            padding: 20px;
            border-top: 1px solid #333;
        }

        .controls.minimal {
            padding: 15px 20px;
        }

        .controls-inner {
            max-width: 900px;
            margin: 0 auto;
        }

        .main-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .extended-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .controls.minimal .extended-controls,
        .controls.minimal .shortcuts-help {
            display: none;
        }

        /* Top Bar */
        .top-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 70px;
            background: rgba(10, 10, 10, 0.95);
            border-bottom: 1px solid #333;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 1000;
        }

        .reader-container {
            padding-top: 70px;
        }

        .left-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .language-selector {
            display: flex;
            gap: 5px;
            background: #1a1a1a;
            padding: 5px;
            border-radius: 20px;
            border: 1px solid #333;
        }

        .lang-btn {
            padding: 6px 14px;
            font-size: 12px;
            font-weight: 600;
            background: transparent;
            color: #888;
            border-radius: 15px;
        }

        .lang-btn:hover {
            background: #333;
            color: #fff;
            transform: none;
        }

        .lang-btn.active {
            background: #555;
            color: #fff;
        }

        .speed-indicator {
            background: #1a1a1a;
            padding: 12px 20px;
            border-radius: 8px;
            border: 1px solid #333;
            min-width: 220px;
            margin-right: 20px;
            margin-top: 10px;
        }

        .speed-indicator.demo-mode {
            border-color: #ff4458;
            background: rgba(255, 68, 88, 0.1);
        }

        .speed-label {
            font-size: 11px;
            color: #888;
            margin-bottom: 4px;
        }

        .speed-indicator.demo-mode .speed-label::before {
            content: "üé¨ ";
        }

        .speed-value {
            color: #e0e0e0;
            font-size: 18px;
            font-weight: 600;
            display: block;
            margin-bottom: 8px;
        }

        .speed-slider {
            width: 100%;
        }

        input[type="range"] {
            width: 100%;
            height: 4px;
            border-radius: 2px;
            background: #333;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #ff4458;
            cursor: pointer;
        }

        input[type="range"]::-moz-range-thumb {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #ff4458;
            cursor: pointer;
            border: none;
        }

        /* Shortcuts Help */
        .shortcuts-help {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #333;
        }

        .shortcuts-help summary {
            cursor: pointer;
            color: #aaa;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .shortcuts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .shortcut-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 12px;
            background: #0a0a0a;
            border-radius: 6px;
            font-size: 13px;
        }

        .shortcut-key {
            color: #ff4458;
            font-weight: 600;
        }

        /* Footer */
        .footer {
            background: #0a0a0a;
            padding: 15px;
            text-align: center;
            font-size: 12px;
            color: #666;
            border-top: 1px solid #333;
        }

        .footer a {
            color: #ff4458;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .word-display {
                font-size: clamp(1.8rem, 7vw, 2.5rem);
            }

            .top-bar {
                position: relative;
                height: auto;
                padding: 10px;
                gap: 8px;
                flex-wrap: wrap;
                justify-content: center;
            }

            .reader-container {
                padding-top: 0;
            }

            .speed-indicator {
                min-width: 150px;
                padding: 8px 12px;
                margin: 0;
            }
            
            .speed-value {
                font-size: 14px;
            }
            
            .speed-label {
                font-size: 10px;
            }
            
            .language-selector {
                padding: 3px;
            }
            
            .lang-btn {
                padding: 4px 10px;
                font-size: 11px;
            }
            
            .controls {
                padding: 10px;
            }
            
            .main-controls {
                gap: 8px;
                margin-bottom: 10px;
            }
            
            button {
                padding: 10px 16px;
                font-size: 14px;
            }
            
            .reader-view {
                min-height: 250px;
                padding: 10px;
            }
            
            .text-input-section {
                padding: 15px;
            }
            
            .input-lang-selector {
                position: static;
                margin-bottom: 15px;
                justify-content: center;
            }
            
            textarea {
                min-height: 150px;
                padding: 12px;
                font-size: 14px;
            }
            
            .input-container h2 {
                font-size: 20px;
                text-align: center;
            }
            
            .stats-grid {
                gap: 10px;
            }
            
            .stat-item {
                padding: 12px;
            }
            
            .stat-value {
                font-size: 1.5rem;
            }
            
            .stat-label {
                font-size: 11px;
            }
            
            .success-screen h2 {
                font-size: 1.5rem;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Text Input Section -->
    <div class="text-input-section" id="textInputSection">
        <div class="input-lang-selector">
            <button class="lang-btn active" id="inputLangCs" onclick="setLanguage('cs')">CZ</button>
            <button class="lang-btn" id="inputLangEn" onclick="setLanguage('en')">EN</button>
        </div>
        <div class="input-container">
            <h2 id="inputTitle">Vlo≈æ text ke ƒçten√≠</h2>
            <textarea id="textInput" placeholder="Vlo≈æ sem text, kter√Ω chce≈° ƒç√≠st...">Rychl√© ƒçten√≠ je dovednost, kter√° m≈Ø≈æe v√Ωraznƒõ zlep≈°it va≈°i produktivitu. Tato technika funguje na principu RSVP - Rapid Serial Visual Presentation.

M√≠sto toho, aby va≈°e oƒçi musely sk√°kat z ≈ô√°dku na ≈ô√°dek, text je prezentov√°n slovo po slovu na stejn√©m m√≠stƒõ. To eliminuje pot≈ôebu pohybu oƒç√≠ a umo≈æ≈àuje mozku zpracov√°vat informace mnohem rychleji.

Studie ukazuj√≠, ≈æe bƒõ≈æn√Ω ƒçlovƒõk ƒçte rychlost√≠ 200-300 slov za minutu. S tr√©ninkem a pomoc√≠ technik jako je tato m≈Ø≈æete dos√°hnout rychlosti a≈æ 800-1000 slov za minutu.</textarea>
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <button onclick="startReading()" id="startBtn" class="primary">Zaƒç√≠t ƒç√≠st</button>
                <button onclick="hideTextInput()" id="hideTextBtn" class="secondary" style="display: none;">‚úï <span id="hideTextLabel">Skr√Ωt</span></button>
            </div>
        </div>
    </div>

    <!-- Reader Container -->
    <div class="reader-container hidden" id="readerContainer">
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="left-controls">
                <div class="language-selector">
                    <button class="lang-btn active" id="langCs" onclick="setLanguage('cs')">CZ</button>
                    <button class="lang-btn" id="langEn" onclick="setLanguage('en')">EN</button>
                </div>
            </div>
            <div class="speed-indicator" id="speedIndicator">
                <div class="speed-label" id="speedLabel">Rychlost</div>
                <div class="speed-value" id="speedValue">300 slov/min</div>
                <input type="range" class="speed-slider" id="speedSlider" min="60" max="900" value="300" step="30">
            </div>
        </div>

        <!-- Word Display -->
        <div class="reader-view">
            <div class="word-display" id="wordDisplay">
                <div class="prepare-text" id="prepareText">P≈ôiprav se...</div>
            </div>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">0 / 0</div>
            </div>
        </div>

        <!-- Controls -->
        <div class="controls minimal" id="controls">
            <div class="controls-inner">
                <div class="main-controls">
                    <button id="playBtn" class="primary" onclick="togglePlay()">‚ñ∂ Start</button>
                    <button id="demoBtn" class="secondary" onclick="toggleDemo()">üé¨ Demo</button>
                    <button class="secondary" onclick="showTextInput()">‚úé <span id="changeTextBtn">Zmƒõnit text</span></button>
                    <button class="secondary" onclick="toggleMode()" id="toggleViewBtn">Roz≈°√≠≈ôen√© zobrazen√≠</button>
                </div>

                <div class="extended-controls">
                    <button class="secondary" onclick="previousParagraph()">‚èÆ <span id="prevParaBtn">Odstavec</span></button>
                    <button class="secondary" onclick="previousSentence()">‚è™ <span id="prevSentBtn">Vƒõta</span></button>
                    <button class="secondary" onclick="nextSentence()"><span id="nextSentBtn">Vƒõta</span> ‚è©</button>
                    <button class="secondary" onclick="nextParagraph()"><span id="nextParaBtn">Odstavec</span> ‚è≠</button>
                </div>

                <div class="extended-controls">
                    <button class="secondary" onclick="restart()">‚Ü∫ <span id="restartBtn">ƒå√≠st znovu</span></button>
                    <button class="secondary" onclick="goToStart()">‚èÆ‚èÆ <span id="startTextBtn">Zaƒç√°tek</span></button>
                    <button class="secondary" onclick="goToEnd()"><span id="endTextBtn">Konec</span> ‚è≠‚è≠</button>
                </div>

                <div class="shortcuts-help">
                    <details>
                        <summary id="shortcutsTitle">‚å®Ô∏è Kl√°vesov√© zkratky</summary>
                        <div class="shortcuts-grid" id="shortcutsGrid">
                            <div class="shortcut-item">
                                <span>Play/Pauza</span>
                                <span class="shortcut-key">Mezern√≠k</span>
                            </div>
                            <div class="shortcut-item">
                                <span id="sc1">Dal≈°√≠ slovo</span>
                                <span class="shortcut-key">‚Üí</span>
                            </div>
                            <div class="shortcut-item">
                                <span id="sc2">P≈ôedchoz√≠ slovo</span>
                                <span class="shortcut-key">‚Üê</span>
                            </div>
                            <div class="shortcut-item">
                                <span id="sc3">Dal≈°√≠ vƒõta</span>
                                <span class="shortcut-key">Shift + ‚Üí</span>
                            </div>
                            <div class="shortcut-item">
                                <span id="sc4">P≈ôedchoz√≠ vƒõta</span>
                                <span class="shortcut-key">Shift + ‚Üê</span>
                            </div>
                            <div class="shortcut-item">
                                <span id="sc5">Dal≈°√≠ odstavec</span>
                                <span class="shortcut-key">Ctrl + ‚Üí</span>
                            </div>
                            <div class="shortcut-item">
                                <span id="sc6">P≈ôedchoz√≠ odstavec</span>
                                <span class="shortcut-key">Ctrl + ‚Üê</span>
                            </div>
                            <div class="shortcut-item">
                                <span id="sc7">Rychleji</span>
                                <span class="shortcut-key">‚Üë</span>
                            </div>
                            <div class="shortcut-item">
                                <span id="sc8">Pomaleji</span>
                                <span class="shortcut-key">‚Üì</span>
                            </div>
                            <div class="shortcut-item">
                                <span id="sc9">Pauza</span>
                                <span class="shortcut-key">Esc</span>
                            </div>
                            <div class="shortcut-item">
                                <span id="sc10">Rozbalit/Sbalit</span>
                                <span class="shortcut-key">F</span>
                            </div>
                        </div>
                    </details>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            v1.0 | <span id="footerText">Navajbk√≥dil</span> <a href="https://www.linkedin.com/in/honzatolbolik/" target="_blank">Honza Tobol√≠k</a>
        </div>
    </div>

    <script>
        // ============================================================================
        // TRANSLATIONS
        // ============================================================================
        
        const translations = {
            cs: {
                inputTitle: 'Vlo≈æ text ke ƒçten√≠',
                startReading: 'Zaƒç√≠t ƒç√≠st',
                changeText: 'Zmƒõnit text',
                speedLabel: 'Rychlost',
                wordsPerMin: 'slov/min',
                play: 'Start',
                pause: 'Pauza',
                continue: 'Pokraƒçovat',
                restart: 'ƒå√≠st znovu',
                demo: 'Demo',
                hideText: 'Skr√Ωt',
                endDemo: 'Ukonƒçit Demo',
                paragraph: 'Odstavec',
                sentence: 'Vƒõta',
                word: 'Slovo',
                start: 'Zaƒç√°tek',
                end: 'Konec',
                shortcuts: 'Kl√°vesov√© zkratky',
                nextWord: 'Dal≈°√≠ slovo',
                prevWord: 'P≈ôedchoz√≠ slovo',
                nextSent: 'Dal≈°√≠ vƒõta',
                prevSent: 'P≈ôedchoz√≠ vƒõta',
                nextPara: 'Dal≈°√≠ odstavec',
                prevPara: 'P≈ôedchoz√≠ odstavec',
                faster: 'Rychleji',
                slower: 'Pomaleji',
                pauseKey: 'Pauza',
                toggleUI: 'Roz≈°√≠≈ôen√© zobrazen√≠',
                expandedView: 'Roz≈°√≠≈ôen√© zobrazen√≠',
                minimalView: 'Minim√°ln√≠ zobrazen√≠',
                footerText: 'Navajbk√≥dil',
                prepare: 'P≈ôiprav se...',
                done: 'Hotovo!',
                yourSpeed: 'Tv√° rychlost',
                totalTime: 'Celkov√Ω ƒças ƒçten√≠',
                timeSaved: 'U≈°et≈ôeno',
                normalTime: 'P≈ôi 200 WPM by trvalo',
                wordsRead: 'P≈ôeƒçteno slov',
                minutes: 'min',
                seconds: 's',
                readAgain: 'ƒå√≠st znovu',
                newText: 'Nov√Ω text',
                demoConfirm: 'Aktivuje se demo re≈æim se zrychluj√≠c√≠m tempem od 250 do 900 slov/min.\n\nPokraƒçovat?',
                placeholder: 'Vlo≈æ sem text, kter√Ω chce≈° ƒç√≠st...',
                defaultText: `Rychl√© ƒçten√≠ je dovednost, kter√° m≈Ø≈æe v√Ωraznƒõ zlep≈°it va≈°i produktivitu. Tato technika funguje na principu RSVP - Rapid Serial Visual Presentation.

M√≠sto toho, aby va≈°e oƒçi musely sk√°kat z ≈ô√°dku na ≈ô√°dek, text je prezentov√°n slovo po slovu na stejn√©m m√≠stƒõ. To eliminuje pot≈ôebu pohybu oƒç√≠ a umo≈æ≈àuje mozku zpracov√°vat informace mnohem rychleji.

Studie ukazuj√≠, ≈æe bƒõ≈æn√Ω ƒçlovƒõk ƒçte rychlost√≠ 200-300 slov za minutu. S tr√©ninkem a pomoc√≠ technik jako je tato m≈Ø≈æete dos√°hnout rychlosti a≈æ 800-1000 slov za minutu.`,
                demoText: `V√≠tejte v inteligentn√≠ ƒçteƒçce! Tato aplikace v√°m pom≈Ø≈æe ƒç√≠st mnohem rychleji.

Pr≈Ømƒõrn√Ω ƒçlovƒõk ƒçte rychlost√≠ 200-300 slov za minutu. S touto technikou m≈Ø≈æete dos√°hnout rychlosti a≈æ 800-1000 slov za minutu.

Princip je jednoduch√Ω: m√≠sto pohybu oƒç√≠ po ≈ô√°dc√≠ch se slova zobrazuj√≠ na jednom m√≠stƒõ. Va≈°e oƒçi z≈Øst√°vaj√≠ v klidu a mozek zpracov√°v√° text rychleji.

Nyn√≠ postupnƒõ zrychlujeme. V≈°imnƒõte si, jak snadno st√≠h√°te ƒç√≠st i p≈ôi vy≈°≈°√≠ rychlosti. Mozek je na to p≈ôipraven√Ω.

ƒåervenƒõ zv√Ωraznƒõn√© p√≠smeno ukazuje optim√°ln√≠ bod pro ƒçten√≠. Je to m√≠sto, kde by mƒõly va≈°e oƒçi setrvat pro nejrychlej≈°√≠ rozpozn√°n√≠ slova.

M≈Ø≈æete navigovat po odstavc√≠ch, vƒõt√°ch i slovech. Pou≈æijte kl√°vesov√© zkratky pro maxim√°ln√≠ efektivitu.

Tato technika se naz√Ωv√° RSVP - Rapid Serial Visual Presentation. Je vƒõdecky podlo≈æen√° a osvƒõdƒçen√°.

Zaƒçnƒõte pomalu a postupnƒõ zvy≈°ujte rychlost. V√°≈° mozek si zvykne a budete ƒç√≠st rychleji ne≈æ si dok√°≈æete p≈ôedstavit.`
            },
            en: {
                inputTitle: 'Enter text to read',
                startReading: 'Start reading',
                changeText: 'Change text',
                speedLabel: 'Speed',
                wordsPerMin: 'words/min',
                play: 'Start',
                pause: 'Pause',
                continue: 'Continue',
                restart: 'Read again',
                demo: 'Demo',
                hideText: 'Hide',
                endDemo: 'End Demo',
                paragraph: 'Paragraph',
                sentence: 'Sentence',
                word: 'Word',
                start: 'Start',
                end: 'End',
                shortcuts: 'Keyboard shortcuts',
                nextWord: 'Next word',
                prevWord: 'Previous word',
                nextSent: 'Next sentence',
                prevSent: 'Previous sentence',
                nextPara: 'Next paragraph',
                prevPara: 'Previous paragraph',
                faster: 'Faster',
                slower: 'Slower',
                pauseKey: 'Pause',
                toggleUI: 'Expanded view',
                expandedView: 'Expanded view',
                minimalView: 'Minimal view',
                footerText: 'Coded by',
                prepare: 'Get ready...',
                done: 'Done!',
                yourSpeed: 'Your speed',
                totalTime: 'Total reading time',
                timeSaved: 'Time saved',
                normalTime: 'At 200 WPM would take',
                wordsRead: 'Words read',
                minutes: 'min',
                seconds: 's',
                readAgain: 'Read again',
                newText: 'New text',
                demoConfirm: 'Demo mode will activate with speeds increasing from 250 to 900 words/min.\n\nContinue?',
                placeholder: 'Paste the text you want to read...',
                defaultText: `Speed reading is a skill that can significantly improve your productivity. This technique works on the principle of RSVP - Rapid Serial Visual Presentation.

Instead of your eyes having to jump from line to line, text is presented word by word in the same place. This eliminates the need for eye movement and allows the brain to process information much faster.

Studies show that the average person reads at 200-300 words per minute. With training and techniques like this, you can achieve speeds of up to 800-1000 words per minute.`,
                demoText: `Welcome to the intelligent speed reader! This app will help you read much faster.

The average person reads at 200-300 words per minute. With this technique you can reach speeds of 800-1000 words per minute.

The principle is simple: instead of moving your eyes across lines, words are displayed one at a time in the same place. Your eyes stay still and your brain processes text faster.

Now we're gradually speeding up. Notice how easily you can read even at higher speeds. Your brain is ready for it.

The red highlighted letter shows the optimal reading point. This is where your eyes should focus for fastest word recognition.

You can navigate by paragraphs, sentences, and words. Use keyboard shortcuts for maximum efficiency.

This technique is called RSVP - Rapid Serial Visual Presentation. It's scientifically proven and tested.

Start slow and gradually increase speed. Your brain will adapt and you'll read faster than you can imagine.`
            }
        };

        let currentLang = 'cs';
        let lang = translations.cs;

        function setLanguage(newLang) {
            currentLang = newLang;
            lang = translations[newLang];
            
            // Update all language buttons
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            
            if (newLang === 'cs') {
                document.getElementById('langCs').classList.add('active');
                document.getElementById('inputLangCs').classList.add('active');
            } else {
                document.getElementById('langEn').classList.add('active');
                document.getElementById('inputLangEn').classList.add('active');
            }
            
            // Update textarea placeholder and default text
            const textarea = document.getElementById('textInput');
            textarea.placeholder = lang.placeholder;
            
            // If textarea has default text, update it
            const csDefault = translations.cs.defaultText;
            const enDefault = translations.en.defaultText;
            if (textarea.value === csDefault || textarea.value === enDefault || textarea.value.trim() === '') {
                textarea.value = lang.defaultText;
            }
            
            // Update "P≈ôiprav se..." text if visible
            const prepareText = document.getElementById('prepareText');
            if (prepareText && prepareText.classList.contains('prepare-text')) {
                prepareText.textContent = lang.prepare;
            }
            
            updateUILanguage();
            saveSettings();
        }

        function updateUILanguage() {
            document.getElementById('inputTitle').textContent = lang.inputTitle;
            document.getElementById('startBtn').textContent = lang.startReading;
            document.getElementById('changeTextBtn').textContent = lang.changeText;
            document.getElementById('speedLabel').textContent = lang.speedLabel;
            document.getElementById('prevParaBtn').textContent = lang.paragraph;
            document.getElementById('nextParaBtn').textContent = lang.paragraph;
            document.getElementById('prevSentBtn').textContent = lang.sentence;
            document.getElementById('nextSentBtn').textContent = lang.sentence;
            document.getElementById('restartBtn').textContent = lang.restart;
            document.getElementById('startTextBtn').textContent = lang.start;
            document.getElementById('endTextBtn').textContent = lang.end;
            document.getElementById('shortcutsTitle').textContent = `‚å®Ô∏è ${lang.shortcuts}`;
            document.getElementById('footerText').textContent = lang.footerText;
            
            // Update hide text button
            const hideTextLabel = document.getElementById('hideTextLabel');
            if (hideTextLabel) {
                hideTextLabel.textContent = lang.hideText;
            }
            
            // Update toggle view button
            const toggleBtn = document.getElementById('toggleViewBtn');
            if (toggleBtn) {
                toggleBtn.textContent = isMinimalMode ? lang.expandedView : lang.minimalView;
            }
            
            // Shortcuts
            document.getElementById('sc1').textContent = lang.nextWord;
            document.getElementById('sc2').textContent = lang.prevWord;
            document.getElementById('sc3').textContent = lang.nextSent;
            document.getElementById('sc4').textContent = lang.prevSent;
            document.getElementById('sc5').textContent = lang.nextPara;
            document.getElementById('sc6').textContent = lang.prevPara;
            document.getElementById('sc7').textContent = lang.faster;
            document.getElementById('sc8').textContent = lang.slower;
            document.getElementById('sc9').textContent = lang.pauseKey;
            document.getElementById('sc10').textContent = lang.toggleUI;
            
            updateSpeedDisplay();
            updatePlayButton();
            updateDemoButton();
        }

        // ============================================================================
        // STATE
        // ============================================================================
        
        let paragraphs = [];
        let currentParagraphIndex = 0;
        let currentSentenceIndex = 0;
        let currentWordIndex = 0;
        
        let isPlaying = false;
        let intervalId = null;
        let wordsPerMinute = 300;
        let highlightMode = 'middle'; // Changed to middle for better centering
        let isMinimalMode = true;
        let isDemoMode = false;
        let demoSpeedStages = [250, 300, 400, 500, 600, 700, 800, 900];
        let currentDemoStage = 0;
        
        // Calculate progress thresholds for equal TIME per stage (not equal words)
        // At speed S, words per second = S/60
        // To get equal time, word count should be proportional to speed
        function getDemoProgressThresholds() {
            const speeds = demoSpeedStages;
            const totalSpeed = speeds.reduce((a, b) => a + b, 0);
            const thresholds = [];
            let cumulative = 0;
            for (let i = 0; i < speeds.length - 1; i++) {
                cumulative += speeds[i];
                thresholds.push(cumulative / totalSpeed);
            }
            return thresholds;
            // Result: [0.057, 0.126, 0.218, 0.333, 0.471, 0.632, 0.816]
            // Slower speeds get fewer words, faster speeds get more
        }
        
        // Timing tracking
        let startTime = null;
        let totalWordsRead = 0;
        let sentencePauseMs = 150; // Pause after sentence

        // ============================================================================
        // TEXT PARSING
        // ============================================================================

        function parseText(text) {
            const paragraphTexts = text
                .split(/\n\n+/)
                .map(p => p.trim())
                .filter(p => p.length > 0);

            paragraphs = paragraphTexts.map(paragraphText => {
                const sentences = paragraphText
                    .split(/([.!?]+\s+)/)
                    .reduce((acc, part, i, arr) => {
                        if (i % 2 === 0 && part.trim()) {
                            const sentence = part + (arr[i + 1] || '');
                            const words = sentence.trim().split(/\s+/).filter(w => w.length > 0);
                            if (words.length > 0) {
                                acc.push({ text: sentence.trim(), words });
                            }
                        }
                        return acc;
                    }, []);
                return sentences;
            });

            paragraphs = paragraphs.filter(p => p.length > 0);
        }

        function getTotalWords() {
            return paragraphs.reduce((total, paragraph) => {
                return total + paragraph.reduce((pTotal, sentence) => {
                    return pTotal + sentence.words.length;
                }, 0);
            }, 0);
        }

        function getCurrentAbsoluteWordIndex() {
            let index = 0;
            for (let p = 0; p < currentParagraphIndex; p++) {
                for (let s = 0; s < paragraphs[p].length; s++) {
                    index += paragraphs[p][s].words.length;
                }
            }
            for (let s = 0; s < currentSentenceIndex; s++) {
                index += paragraphs[currentParagraphIndex][s].words.length;
            }
            index += currentWordIndex;
            return index;
        }

        // ============================================================================
        // DISPLAY
        // ============================================================================

        function displayWord() {
            if (!paragraphs.length) return;

            const paragraph = paragraphs[currentParagraphIndex];
            if (!paragraph || !paragraph[currentSentenceIndex]) {
                finish();
                return;
            }

            const sentence = paragraph[currentSentenceIndex];
            if (currentWordIndex >= sentence.words.length) {
                if (currentSentenceIndex < paragraph.length - 1) {
                    currentSentenceIndex++;
                    currentWordIndex = 0;
                    displayWord();
                } else if (currentParagraphIndex < paragraphs.length - 1) {
                    currentParagraphIndex++;
                    currentSentenceIndex = 0;
                    currentWordIndex = 0;
                    displayWord();
                } else {
                    finish();
                }
                return;
            }

            const word = sentence.words[currentWordIndex];
            
            // Always use middle letter for highlighting (better for centering)
            const highlightIndex = Math.floor(word.length / 2);
            
            const before = word.substring(0, highlightIndex);
            const highlighted = word.charAt(highlightIndex);
            const after = word.substring(highlightIndex + 1);
            
            document.getElementById('wordDisplay').innerHTML = `
                <div class="word-container">
                    <div class="word-layout">
                        <span class="word-before">${before}</span>
                        <span class="word-highlight">${highlighted}</span>
                        <span class="word-after">${after}</span>
                    </div>
                </div>
            `;
            
            updateProgress();
        }
        
        function updateProgress() {
            const totalWords = getTotalWords();
            const currentWord = getCurrentAbsoluteWordIndex() + 1;
            const progress = (currentWord / totalWords) * 100;
            
            document.getElementById('progressFill').style.width = `${progress}%`;
            document.getElementById('progressText').textContent = `${currentWord} / ${totalWords}`;
        }

        // ============================================================================
        // PLAYBACK
        // ============================================================================

        function startInterval() {
            const delay = 60000 / wordsPerMinute;
            
            const advanceWord = () => {
                const currentSentence = paragraphs[currentParagraphIndex]?.[currentSentenceIndex];
                const isEndOfSentence = currentSentence && currentWordIndex >= currentSentence.words.length - 1;
                
                currentWordIndex++;
                totalWordsRead++;
                displayWord();
                
                if (isDemoMode) {
                    const totalWords = getTotalWords();
                    const currentWord = getCurrentAbsoluteWordIndex();
                    const progress = currentWord / totalWords;
                    
                    // Use time-balanced thresholds instead of linear
                    const stageProgress = getDemoProgressThresholds();
                    for (let i = 0; i < stageProgress.length; i++) {
                        if (progress >= stageProgress[i] && currentDemoStage === i) {
                            currentDemoStage = i + 1;
                            if (currentDemoStage < demoSpeedStages.length) {
                                wordsPerMinute = demoSpeedStages[currentDemoStage];
                                updateSpeedDisplay();
                                clearInterval(intervalId);
                                startInterval();
                            }
                            break;
                        }
                    }
                }
                
                // Add pause after sentence
                if (isEndOfSentence && isPlaying) {
                    clearInterval(intervalId);
                    setTimeout(() => {
                        if (isPlaying) startInterval();
                    }, sentencePauseMs);
                }
            };
            
            intervalId = setInterval(advanceWord, delay);
        }

        function play() {
            if (paragraphs.length === 0) return;
            if (!startTime) startTime = Date.now();
            isPlaying = true;
            updatePlayButton();
            startInterval();
        }

        function pause() {
            isPlaying = false;
            updatePlayButton();
            clearInterval(intervalId);
        }

        function togglePlay() {
            if (paragraphs.length === 0) {
                showTextInput();
                return;
            }
            if (isPlaying) {
                pause();
            } else {
                play();
            }
        }

        function restart() {
            pause();
            currentParagraphIndex = 0;
            currentSentenceIndex = 0;
            currentWordIndex = 0;
            startTime = null;
            totalWordsRead = 0;
            finishStats = null; // Reset stats
            
            // Show progress bar again
            const progressContainer = document.querySelector('.progress-container');
            if (progressContainer) {
                progressContainer.style.display = 'block';
            }
            
            // Re-parse text if needed
            if (paragraphs.length === 0) {
                const text = document.getElementById('textInput').value.trim();
                if (text) {
                    parseText(text);
                }
            }
            
            displayWord();
            updateProgress();
            document.getElementById('playBtn').innerHTML = `‚ñ∂ ${lang.play}`;
        }

        let finishStats = null; // Store stats to prevent recalculation
        
        function finish() {
            // Prevent multiple calls
            if (finishStats) {
                showFinishScreen();
                return;
            }
            
            pause();
            
            const endTime = Date.now();
            const elapsedMs = endTime - startTime;
            const elapsedSeconds = Math.round(elapsedMs / 1000);
            const elapsedMinutes = elapsedMs / 60000;
            const totalWords = getTotalWords();
            const actualWpm = Math.round(totalWords / elapsedMinutes);
            
            // Calculate time saved vs reading at 200 WPM
            const normalReadingSeconds = Math.round((totalWords / 200) * 60);
            const timeSavedSeconds = Math.max(0, normalReadingSeconds - elapsedSeconds);
            
            // Store stats
            finishStats = {
                actualWpm,
                elapsedSeconds,
                timeSavedSeconds,
                totalWords
            };
            
            showFinishScreen();
            
            if (isDemoMode) {
                document.getElementById('speedIndicator').classList.remove('demo-mode');
                isDemoMode = false;
                currentDemoStage = 0;
                wordsPerMinute = 300;
                updateSpeedDisplay();
                updateDemoButton();
            }
        }
        
        function showFinishScreen() {
            if (!finishStats) return;
            
            const { actualWpm, elapsedSeconds, timeSavedSeconds, totalWords } = finishStats;
            
            // Format total time
            const totalMinutes = Math.floor(elapsedSeconds / 60);
            const totalSecs = elapsedSeconds % 60;
            const totalTimeDisplay = totalMinutes > 0 
                ? `${totalMinutes}:${totalSecs.toString().padStart(2, '0')}`
                : `${totalSecs} ${lang.seconds}`;
            
            // Calculate what 200 WPM would take
            const normalSeconds = Math.round((totalWords / 200) * 60);
            const normalMinutes = Math.floor(normalSeconds / 60);
            const normalSecs = normalSeconds % 60;
            const normalTimeDisplay = normalMinutes > 0 
                ? `${normalMinutes}:${normalSecs.toString().padStart(2, '0')}`
                : `${normalSeconds} ${lang.seconds}`;
            
            // Format time saved
            const timeSavedDisplay = timeSavedSeconds > 0
                ? `${timeSavedSeconds} ${lang.seconds}`
                : '‚Äî';
            
            document.getElementById('wordDisplay').innerHTML = `
                <div class="success-screen">
                    <h2>üéâ ${lang.done}</h2>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value">${actualWpm}</div>
                            <div class="stat-label">${lang.yourSpeed} (WPM)</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">${totalTimeDisplay}</div>
                            <div class="stat-label">${lang.totalTime}</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">${timeSavedDisplay}</div>
                            <div class="stat-label">${lang.timeSaved}</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">${normalTimeDisplay}</div>
                            <div class="stat-label">${lang.normalTime}</div>
                        </div>
                    </div>
                </div>
            `;
            
            // Hide progress bar
            document.querySelector('.progress-container').style.display = 'none';
            
            document.getElementById('playBtn').innerHTML = `‚Ü∫ ${lang.restart}`;
        }

        function updatePlayButton() {
            const btn = document.getElementById('playBtn');
            if (isPlaying) {
                btn.innerHTML = `‚è∏ ${lang.pause}`;
            } else {
                btn.innerHTML = `‚ñ∂ ${lang.continue}`;
            }
        }

        function updateDemoButton() {
            const btn = document.getElementById('demoBtn');
            if (btn) {
                if (isDemoMode) {
                    btn.innerHTML = `üé¨ ${lang.endDemo}`;
                } else {
                    btn.innerHTML = `üé¨ ${lang.demo}`;
                }
            }
        }

        // ============================================================================
        // NAVIGATION
        // ============================================================================

        function nextWord() {
            if (!isPlaying && paragraphs.length > 0) {
                const sentence = paragraphs[currentParagraphIndex]?.[currentSentenceIndex];
                if (sentence && currentWordIndex < sentence.words.length - 1) {
                    currentWordIndex++;
                    displayWord();
                } else {
                    nextSentence();
                }
            }
        }

        function previousWord() {
            if (!isPlaying && paragraphs.length > 0) {
                if (currentWordIndex > 0) {
                    currentWordIndex--;
                    displayWord();
                } else {
                    previousSentence();
                    const sentence = paragraphs[currentParagraphIndex]?.[currentSentenceIndex];
                    if (sentence) {
                        currentWordIndex = sentence.words.length - 1;
                        displayWord();
                    }
                }
            }
        }

        function nextSentence() {
            pause();
            const paragraph = paragraphs[currentParagraphIndex];
            if (paragraph && currentSentenceIndex < paragraph.length - 1) {
                currentSentenceIndex++;
                currentWordIndex = 0;
            } else if (currentParagraphIndex < paragraphs.length - 1) {
                currentParagraphIndex++;
                currentSentenceIndex = 0;
                currentWordIndex = 0;
            }
            displayWord();
        }

        function previousSentence() {
            pause();
            if (currentSentenceIndex > 0) {
                currentSentenceIndex--;
            } else if (currentParagraphIndex > 0) {
                currentParagraphIndex--;
                const paragraph = paragraphs[currentParagraphIndex];
                currentSentenceIndex = paragraph.length - 1;
            }
            currentWordIndex = 0;
            displayWord();
        }

        function nextParagraph() {
            pause();
            if (currentParagraphIndex < paragraphs.length - 1) {
                currentParagraphIndex++;
                currentSentenceIndex = 0;
                currentWordIndex = 0;
                displayWord();
            }
        }

        function previousParagraph() {
            pause();
            if (currentParagraphIndex > 0) {
                currentParagraphIndex--;
                currentSentenceIndex = 0;
                currentWordIndex = 0;
                displayWord();
            }
        }

        function goToStart() {
            pause();
            currentParagraphIndex = 0;
            currentSentenceIndex = 0;
            currentWordIndex = 0;
            displayWord();
        }

        function goToEnd() {
            pause();
            currentParagraphIndex = paragraphs.length - 1;
            const lastParagraph = paragraphs[currentParagraphIndex];
            currentSentenceIndex = lastParagraph.length - 1;
            const lastSentence = lastParagraph[currentSentenceIndex];
            currentWordIndex = lastSentence.words.length - 1;
            displayWord();
        }

        // ============================================================================
        // UI CONTROLS
        // ============================================================================

        function showTextInput() {
            pause();
            document.getElementById('textInputSection').classList.remove('hidden');
            document.getElementById('readerContainer').classList.add('hidden');
            
            // Show hide button if there's already parsed text
            const hideBtn = document.getElementById('hideTextBtn');
            if (hideBtn && paragraphs.length > 0) {
                hideBtn.style.display = 'inline-flex';
            }
        }
        
        function hideTextInput() {
            document.getElementById('textInputSection').classList.add('hidden');
            document.getElementById('readerContainer').classList.remove('hidden');
        }

        function startReading() {
            const text = document.getElementById('textInput').value.trim();
            if (!text) {
                alert(currentLang === 'cs' ? 'Pros√≠m, vlo≈æ nƒõjak√Ω text!' : 'Please enter some text!');
                return;
            }

            parseText(text);
            currentParagraphIndex = 0;
            currentSentenceIndex = 0;
            currentWordIndex = 0;
            startTime = null;
            totalWordsRead = 0;
            finishStats = null; // Reset stats
            
            document.getElementById('textInputSection').classList.add('hidden');
            document.getElementById('readerContainer').classList.remove('hidden');
            
            // Show progress bar
            document.querySelector('.progress-container').style.display = 'block';
            
            // Ensure minimal mode is active
            if (!isMinimalMode) {
                toggleMode();
            }
            
            displayWord();
            play();
        }

        function toggleDemo() {
            if (isDemoMode) {
                // Stop demo
                pause();
                document.getElementById('speedIndicator').classList.remove('demo-mode');
                isDemoMode = false;
                currentDemoStage = 0;
                wordsPerMinute = 300;
                updateSpeedDisplay();
                updateDemoButton();
                showTextInput();
                return;
            }
            
            // Start demo - show confirm dialog
            if (!confirm(lang.demoConfirm)) {
                return;
            }
            
            pause();
            
            const demoText = lang.demoText;
            document.getElementById('textInput').value = demoText;
            parseText(demoText);
            
            currentParagraphIndex = 0;
            currentSentenceIndex = 0;
            currentWordIndex = 0;
            currentDemoStage = 0;
            startTime = null;
            totalWordsRead = 0;
            finishStats = null; // Reset stats
            
            wordsPerMinute = demoSpeedStages[0];
            updateSpeedDisplay();
            
            isDemoMode = true;
            document.getElementById('speedIndicator').classList.add('demo-mode');
            updateDemoButton();
            
            document.getElementById('textInputSection').classList.add('hidden');
            document.getElementById('readerContainer').classList.remove('hidden');
            
            // Show progress bar
            document.querySelector('.progress-container').style.display = 'block';
            
            if (!isMinimalMode) {
                toggleMode();
            }
            
            displayWord();
            play();
        }

        function toggleMode() {
            isMinimalMode = !isMinimalMode;
            const controls = document.getElementById('controls');
            const toggleBtn = document.getElementById('toggleViewBtn');
            
            if (isMinimalMode) {
                controls.classList.add('minimal');
                if (toggleBtn) toggleBtn.textContent = lang.expandedView;
            } else {
                controls.classList.remove('minimal');
                if (toggleBtn) toggleBtn.textContent = lang.minimalView;
            }
        }

        function updateSpeedDisplay() {
            document.getElementById('speedValue').textContent = `${wordsPerMinute} ${lang.wordsPerMin}`;
            document.getElementById('speedSlider').value = wordsPerMinute;
        }

        function adjustSpeed(delta) {
            wordsPerMinute = Math.max(60, Math.min(900, wordsPerMinute + delta));
            updateSpeedDisplay();
            saveSettings();
            
            if (isPlaying) {
                clearInterval(intervalId);
                startInterval();
            }
        }

        // ============================================================================
        // SETTINGS
        // ============================================================================

        function loadSettings() {
            const saved = localStorage.getItem('speedReaderSettings');
            if (saved) {
                try {
                    const settings = JSON.parse(saved);
                    wordsPerMinute = settings.wordsPerMinute || 300;
                    currentLang = settings.language || 'cs';
                    lang = translations[currentLang];
                    
                    updateSpeedDisplay();
                    
                    // Update all language buttons
                    document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
                    if (currentLang === 'cs') {
                        document.getElementById('langCs').classList.add('active');
                        document.getElementById('inputLangCs').classList.add('active');
                    } else {
                        document.getElementById('langEn').classList.add('active');
                        document.getElementById('inputLangEn').classList.add('active');
                    }
                    
                    updateUILanguage();
                } catch (e) {
                    console.error('Error loading settings:', e);
                }
            }
        }

        function saveSettings() {
            const settings = {
                wordsPerMinute,
                language: currentLang
            };
            localStorage.setItem('speedReaderSettings', JSON.stringify(settings));
        }

        // ============================================================================
        // EVENT LISTENERS
        // ============================================================================

        document.getElementById('speedSlider').addEventListener('input', (e) => {
            wordsPerMinute = parseInt(e.target.value);
            updateSpeedDisplay();
            saveSettings();
            
            if (isPlaying) {
                clearInterval(intervalId);
                startInterval();
            }
        });

        document.addEventListener('keydown', (e) => {
            if (e.target.tagName === 'TEXTAREA' || e.target.tagName === 'INPUT') {
                return;
            }

            if (e.code === 'Space') {
                e.preventDefault();
                togglePlay();
            } else if (e.code === 'ArrowUp') {
                e.preventDefault();
                adjustSpeed(50);
            } else if (e.code === 'ArrowDown') {
                e.preventDefault();
                adjustSpeed(-50);
            } else if (e.code === 'ArrowRight') {
                e.preventDefault();
                if (e.shiftKey) {
                    nextSentence();
                } else if (e.ctrlKey || e.metaKey) {
                    nextParagraph();
                } else {
                    nextWord();
                }
            } else if (e.code === 'ArrowLeft') {
                e.preventDefault();
                if (e.shiftKey) {
                    previousSentence();
                } else if (e.ctrlKey || e.metaKey) {
                    previousParagraph();
                } else {
                    previousWord();
                }
            } else if (e.code === 'Home') {
                e.preventDefault();
                goToStart();
            } else if (e.code === 'End') {
                e.preventDefault();
                goToEnd();
            } else if (e.code === 'KeyR' && (e.ctrlKey || e.metaKey)) {
                e.preventDefault();
                restart();
            } else if (e.code === 'KeyF' && !e.ctrlKey && !e.metaKey) {
                e.preventDefault();
                toggleMode();
            } else if (e.code === 'Escape') {
                e.preventDefault();
                // Close text input if open
                const textSection = document.getElementById('textInputSection');
                if (!textSection.classList.contains('hidden') && paragraphs.length > 0) {
                    hideTextInput();
                } else if (isPlaying) {
                    pause();
                }
            }
        });

        // ============================================================================
        // INIT
        // ============================================================================

        loadSettings();
    </script>
</body>
</html>
